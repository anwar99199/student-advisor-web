# ๐ฅ ุฏููู ุฅุนุฏุงุฏ ุฌุฏูู ุงููุณุชุฎุฏููู
## Users Table Setup Guide

---

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ุฌุฏูู ุงููุณุชุฎุฏููู ุงูุฌุฏูุฏ
- ุชู ุฅูุดุงุก ุฌุฏูู `users` ูููุตู ูู Supabase
- ูุฎุฒู ูุนูููุงุช ุฅุถุงููุฉ ุนู ุงููุณุชุฎุฏููู
- ูุฑุชุจุท ุจู `auth.users` ุนุจุฑ `auth_user_id`

### 2. API Endpoints ุฌุฏูุฏุฉ
- `GET /admin/users` - ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
- `POST /admin/update-user` - ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู

### 3. ุชุจููุจ ุฌุฏูุฏ ูู ููุญุฉ ุชุญูู ุงููุฏูุฑ
- ุชุจููุจ "ุงููุณุชุฎุฏููู" ูุน ุฌุฏูู ูุงูู
- ุจุญุซ ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุนุฑุถ ุฌููุน ูุนูููุงุช ุงููุณุชุฎุฏููู

---

## ๐๏ธ ุฌุฏูู ุงููุณุชุฎุฏููู

### ุงูุฃุนูุฏุฉ:

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `auth_user_id` | UUID | ูุฑุฌุน ุฅูู auth.users |
| `email` | TEXT | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุฑูุฏ) |
| `name` | TEXT | ุงูุงุณู ุงููุงูู |
| `phone` | TEXT | ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู) |
| `subscription_plan` | TEXT | ููุน ุงูุจุงูุฉ (basic/premium/none) |
| `subscription_status` | TEXT | ุญุงูุฉ ุงูุงุดุชุฑุงู (active/expired/none) |
| `activation_code` | TEXT | ููุฏ ุงูุชูุนูู |
| `created_at` | TIMESTAMPTZ | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | TIMESTAMPTZ | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `last_login_at` | TIMESTAMPTZ | ุขุฎุฑ ุชุณุฌูู ุฏุฎูู |

---

## ๐ ุฎุทูุงุช ุงูุชูุนูู

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงูุฌุฏูู ูู Supabase

1. ุงูุชุญ **Supabase Dashboard**
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุงูุตู ูุญุชูู ููู `/CREATE_USERS_TABLE.sql`
4. ุงุถุบุท **Run**

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุฌุฏูู

ุดุบูู ุงูุงุณุชุนูุงู ุงูุชุงูู:
```sql
SELECT * FROM users LIMIT 5;
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงูุชูุงูู

1. ุณุฌูู ุญุณุงุจ ุฌุฏูุฏ ูู ุงููููุน
2. ุงูุชุญ ููุญุฉ ุชุญูู ุงููุฏูุฑ `/admin/dashboard`
3. ุงูุชุญ ุชุจููุจ "ุงููุณุชุฎุฏููู"
4. ูุฌุจ ุฃู ุชุดุงูุฏ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ!

---

## ๐ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู

```
auth.users (Supabase Auth)
    โ
    โโโโ (one-to-one) โโโ users (ุฌุฏูู ูุฎุตุต)
    โ                          โ
    โ                          โโโโ subscription_plan
    โ                          โโโโ subscription_status
    โ                          โโโโ activation_code
    โ
    โโโโ (ูุฑูุน) โโโ kv_store (ุงูุฅูุตุงูุงุช)
```

---

## ๐ ููุฒุงุช ุชุจููุจ ุงููุณุชุฎุฏููู

### ูุง ููููู ุฑุคูุชู:
- โ ูุงุฆูุฉ ูุงููุฉ ุจุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู
- โ ุงูุงุณู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุฑูู ุงููุงุชู (ุฅู ููุฌุฏ)
- โ ููุน ุงูุจุงูุฉ (basic/premium/none)
- โ ุญุงูุฉ ุงูุงุดุชุฑุงู (active/expired/none)
- โ ููุฏ ุงูุชูุนูู ุงูุฎุงุต ุจูู ูุณุชุฎุฏู
- โ ุชุงุฑูุฎ ุงูุชุณุฌูู
- โ ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

### ุงูุจุญุซ:
- ุจุญุซ ุณุฑูุน ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุชุตููุฉ ููุฑูุฉ ูููุชุงุฆุฌ

---

## ๐ ุณูุฑ ุงูุนูู

### ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ:

```
1. ุงููุณุชุฎุฏู ูููุฃ ูููุฐุฌ ุงูุชุณุฌูู
   โ
2. ูุชู ุฅูุดุงุก ุญุณุงุจ ูู auth.users (Supabase Auth)
   โ
3. ุชููุงุฆูุงู ูุชู ุฅุถุงูุฉ ุณุฌู ูู ุฌุฏูู users
   โ
4. ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ:
   - subscription_plan: 'none'
   - subscription_status: 'none'
   - activation_code: null
   โ
5. ูุธูุฑ ุงููุณุชุฎุฏู ูู ููุญุฉ ุชุญูู ุงููุฏูุฑ
```

### ุนูุฏ ุงูููุงููุฉ ุนูู ุฅูุตุงู:

```
1. ุงููุฏูุฑ ููุจู ุงูุฅูุตุงู
   โ
2. ูุชู ุฅูุดุงุก ุงุดุชุฑุงู ูู ุฌุฏูู subscriptions
   โ
3. ูููู ูููุฏูุฑ ุฑุจุท ุงููุณุชุฎุฏู ุจุงูุงุดุชุฑุงู ูุฏููุงู
   (ุฃู ูููู ุชุทููุฑ ูุฐุง ููููู ุชููุงุฆูุงู)
```

---

## ๐๏ธ ุงุณุชุนูุงูุงุช SQL ูููุฏุฉ

### ุนุฑุถ ุงููุณุชุฎุฏููู ูุน ูุนูููุงุช Auth:
```sql
SELECT 
    u.id,
    u.name,
    u.email,
    u.subscription_plan,
    u.subscription_status,
    u.created_at,
    au.email_confirmed_at,
    au.last_sign_in_at
FROM users u
LEFT JOIN auth.users au ON u.auth_user_id = au.id
ORDER BY u.created_at DESC;
```

### ุนุฏุฏ ุงููุณุชุฎุฏููู ุญุณุจ ุงูุจุงูุฉ:
```sql
SELECT 
    subscription_plan,
    COUNT(*) as count
FROM users
GROUP BY subscription_plan;
```

### ุงููุณุชุฎุฏููู ุงููุดุทูู:
```sql
SELECT * FROM users 
WHERE subscription_status = 'active'
ORDER BY created_at DESC;
```

### ุงููุณุชุฎุฏููู ุจุฏูู ุงุดุชุฑุงู:
```sql
SELECT * FROM users 
WHERE subscription_plan = 'none'
ORDER BY created_at DESC;
```

---

## ๐ง ุชุญุฏูุซุงุช ูุณุชูุจููุฉ ููุชุฑุญุฉ

### 1. ุฑุจุท ุชููุงุฆู ูุน ุงูุงุดุชุฑุงูุงุช
ุนูุฏ ุงูููุงููุฉ ุนูู ุงูุฅูุตุงูุ ูููู ุชุญุฏูุซ ุฌุฏูู ุงููุณุชุฎุฏููู ุชููุงุฆูุงู:
```sql
UPDATE users 
SET 
    subscription_plan = 'premium',
    subscription_status = 'active',
    activation_code = 'AC-XYZ123'
WHERE email = 'user@example.com';
```

### 2. ุฅุถุงูุฉ ุญููู ุฅุถุงููุฉ
ูููู ุฅุถุงูุฉ:
- `university` - ุงูุฌุงูุนุฉ
- `major` - ุงูุชุฎุตุต
- `year` - ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ
- `preferences` - JSONB ููุชูุถููุงุช

### 3. ุชูุจููุงุช ูุฅุดุนุงุฑุงุช
- ุฅุดุนุงุฑ ูุจู ุงูุชูุงุก ุงูุงุดุชุฑุงู
- ุฅุดุนุงุฑ ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- ุชูุงุฑูุฑ ููููุฉ/ุฃุณุจูุนูุฉ

---

## โ Checklist

ูุจู ุงูุงุณุชุฎุฏุงู:

- [ ] ุชู ุฅูุดุงุก ุฌุฏูู `users` ูู Supabase
- [ ] ุชู ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏูู
- [ ] ุชู ุงุฎุชุจุงุฑ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- [ ] ุธูุฑ ุงููุณุชุฎุฏู ูู ุฌุฏูู `users`
- [ ] ูุนูู ุชุจููุจ "ุงููุณุชุฎุฏููู" ูู ููุญุฉ ุงูุชุญูู
- [ ] ุงูุจุญุซ ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุนูู

---

## ๐ ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุชุญูู ูู Console Logs
2. ุชุญูู ูู Supabase Edge Function Logs
3. ุชุฃูุฏ ูู ุชูููุฐ ุณูุฑุจุช SQL ุจูุฌุงุญ
4. ุฑุงุฌุน `/DATABASE_TABLES_SUMMARY.md`

---

**ุชู ุจูุฌุงุญ! ุงูุขู ูุฏูู ูุธุงู ูุงูู ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ๐**

ุขุฎุฑ ุชุญุฏูุซ: 17 ููุงูุฑ 2026
