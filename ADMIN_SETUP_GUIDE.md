# ๐ก๏ธ ุฏููู ุฅุนุฏุงุฏ ููุญุฉ ุชุญูู ุงููุฏูุฑ
## Admin Dashboard Setup Guide

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุงูู ูุฅุฏุงุฑุฉ ุงููููุน ูุชุถูู:
- โ ุตูุญุฉ ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ (`/admin/login`)
- โ ููุญุฉ ุชุญูู ุดุงููุฉ (`/admin/dashboard`)
- โ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ูุฃููุงุฏ ุงูุชูุนูู
- โ ูุฑุงุฌุนุฉ ููุจูู/ุฑูุถ ุงูุฅูุตุงูุงุช
- โ ุฅูุดุงุก ุงุดุชุฑุงูุงุช ุฌุฏูุฏุฉ
- โ ุฅุญุตุงุฆูุงุช ูููุญุฉ ูุนูููุงุช

---

## ๐ ุจูุงูุงุช ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ

### ุงููุฏูุฑ ุงูุฃูู:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** `as8543245@gmail.com`
- **ูููุฉ ุงููุฑูุฑ:** `A1999anw#`

### ุงููุฏูุฑ ุงูุซุงูู:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** `anwaralrawahi459@gmail.com`
- **ูููุฉ ุงููุฑูุฑ:** `6101999`

โ๏ธ **ูุงู:** ูุฐู ุงูุจูุงูุงุช ูุฎุฒูุฉ ูู ุงูููุฏ Frontend ููุท ููุง ุชุญุชุงุฌ ุฅูู Supabase Auth ูููุตู.

---

## ๐๏ธ ุงูุฌุฏุงูู ุงููุทููุจุฉ ูู Supabase

### 1๏ธโฃ ุฌุฏูู `subscriptions` (ุฅูุฒุงูู)

ูุฐุง ุงูุฌุฏูู **ูุทููุจ ุจุดุฏุฉ** ูุนูู ุงููุธุงู. ูู ุจุชูููุฐ ุงูุณูุฑุจุช ุงูุชุงูู ูู **Supabase Dashboard โ SQL Editor**:

```sql
-- ุฅูุดุงุก ุฌุฏูู ุงูุงุดุชุฑุงูุงุช
CREATE TABLE IF NOT EXISTS subscriptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    activation_code TEXT UNIQUE NOT NULL,
    plan TEXT NOT NULL CHECK (plan IN ('basic', 'standard', 'premium')),
    status TEXT NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'expired', 'cancelled')),
    expires_at TIMESTAMPTZ NOT NULL,
    user_email TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ุฅุถุงูุฉ ููุงุฑุณ
CREATE INDEX idx_subscriptions_activation_code ON subscriptions(activation_code);
CREATE INDEX idx_subscriptions_status ON subscriptions(status);
CREATE INDEX idx_subscriptions_user_email ON subscriptions(user_email);

-- ุชูุนูู Row Level Security
ALTER TABLE subscriptions ENABLE ROW LEVEL SECURITY;

-- ุณูุงุณุฉ ููุณูุงุญ ุจุงููุตูู ุงููุงูู (service_role)
CREATE POLICY "Enable all access for service role" ON subscriptions
    FOR ALL USING (true);
```

### 2๏ธโฃ ุฌุฏูู `kv_store_c2f27df0` (ููุฌูุฏ ุจุงููุนู)

ูุฐุง ุงูุฌุฏูู ููุฌูุฏ ุจุงููุนู ูููุณุชุฎุฏู ูุชุฎุฒูู:
- ุงูุฅูุตุงูุงุช ุงููุฑููุนุฉ ูู ุงููุณุชุฎุฏููู
- ุจูุงูุงุช ุฅุถุงููุฉ ูููุธุงู

**ูุง ุญุงุฌุฉ ูุฅูุดุงุฆู ูุฌุฏุฏุงู.**

### 3๏ธโฃ ุฌุฏูู `auth.users` (ููุฌูุฏ ุจุงููุนู)

ุฌุฏูู ุงููุณุชุฎุฏููู ููุฌูุฏ ุชููุงุฆูุงู ูู Supabase Auth.

**ูุง ุญุงุฌุฉ ูุฅูุดุงุก ุฌุฏูู ูุณุชุฎุฏููู ูููุตู.**

---

## ๐ ุฎุทูุงุช ุงูุชูุนูู

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุฌุฏูู subscriptions

1. ุงูุชุญ **Supabase Dashboard**
2. ุงูุชูู ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุงูุตู ุงูุณูุฑุจุช ูู ููู `/ADMIN_TABLES_SETUP.sql`
4. ุงุถุบุท **Run** ูุชูููุฐ ุงูุณูุฑุจุช

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุฌุฏูู

ูู ุจุชุดุบูู ุงูุงุณุชุนูุงู ุงูุชุงูู ููุชุฃูุฏ:

```sql
SELECT * FROM subscriptions LIMIT 5;
```

### ุงูุฎุทูุฉ 3: ุชุณุฌูู ุงูุฏุฎูู

1. ุงูุชุญ ุงูุฑุงุจุท: `https://your-app-url/admin/login`
2. ุงุณุชุฎุฏู ุฃุญุฏ ุงูุญุณุงุจูู ุงููุฐููุฑูู ุฃุนูุงู
3. ุณุชูููู ุชููุงุฆูุงู ุฅูู ููุญุฉ ุงูุชุญูู

---

## ๐ ููุฒุงุช ููุญุฉ ุงูุชุญูู

### ๐ฏ ุงูุฅุญุตุงุฆูุงุช ุงูุฑุฆูุณูุฉ
- ุฅุฌูุงูู ุนุฏุฏ ุงูุงุดุชุฑุงูุงุช
- ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ
- ุงูุฅูุตุงูุงุช ููุฏ ุงููุฑุงุฌุนุฉ
- ุนุฏุฏ ุงููุณุชุฎุฏููู

### ๐ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช
- ุนุฑุถ ุฌููุน ุงูุงุดุชุฑุงูุงุช
- ุงูุจุญุซ ุจููุฏ ุงูุชูุนูู
- ุนุฑุถ ุชูุงุตูู ูู ุงุดุชุฑุงู:
  - ููุฏ ุงูุชูุนูู
  - ููุน ุงูุจุงูุฉ (basic/standard/premium)
  - ุงูุญุงูุฉ (active/expired)
  - ุชุงุฑูุฎ ุงูุงูุชูุงุก
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุฅู ููุฌุฏ)

### ๐ ูุฑุงุฌุนุฉ ุงูุฅูุตุงูุงุช
- ุนุฑุถ ุฌููุน ุงูุฅูุตุงูุงุช ุงููุฑููุนุฉ
- ูุจูู ุงูุฅูุตุงู โ **ุฅูุดุงุก ุงุดุชุฑุงู ุชููุงุฆูุงู**
- ุฑูุถ ุงูุฅูุตุงู
- ุนุฑุถ ุชูุงุตูู ุงูุฅูุตุงู:
  - ุงุณู ุงูููู
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูููุณุชุฎุฏู
  - ุงูุจุงูุฉ ุงููุฎุชุงุฑุฉ
  - ุงููุจูุบ ุงููุฏููุน
  - ุงูุชุงุฑูุฎ ูุงูููุช

### โ ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
- ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)
- ุงุฎุชูุงุฑ ููุน ุงูุจุงูุฉ
- ุชุญุฏูุฏ ูุฏุฉ ุงูุงุดุชุฑุงู
- **ุงูุญุตูู ุนูู ููุฏ ุงูุชูุนูู ููุฑุงู**

---

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### ุทุฑููุฉ 1: ุนุจุฑ ุฑูุน ุงูุฅูุตุงู

1. ุงููุณุชุฎุฏู ูุดุชุฑู ุจุงูุฉ ููุฑูุน ุงูุฅูุตุงู
2. ุงููุฏูุฑ ูุฑุงุฌุน ุงูุฅูุตุงู ูู ููุญุฉ ุงูุชุญูู
3. ุงููุฏูุฑ ููุจู ุงูุฅูุตุงู
4. **ูุชู ุฅูุดุงุก ุงุดุชุฑุงู ุชููุงุฆูุงู**
5. ูุญุตู ุงููุณุชุฎุฏู ุนูู ููุฏ ุงูุชูุนูู

### ุทุฑููุฉ 2: ุฅูุดุงุก ูุจุงุดุฑ ูู ุงููุฏูุฑ

1. ุงููุฏูุฑ ูุฏุฎู ุฅูู ุชุจููุจ "ุฅูุดุงุก ุงุดุชุฑุงู"
2. ูุฎุชุงุฑ ุงูุจุงูุฉ ูุงููุฏุฉ
3. ูููุดุฆ ุงูุงุดุชุฑุงู
4. **ูุญุตู ุนูู ููุฏ ุงูุชูุนูู ููุฑุงู**
5. ูุฑุณู ุงูููุฏ ูููุณุชุฎุฏู ูุฏููุงู

---

## ๐ API Endpoints ูููุฏูุฑ

ุฌููุน ุงูู endpoints ุชุนูู ุจุฏูู authentication (ูุฃู ุงูุชุญูู ูุชู ูู Frontend):

### 1. ุงูุญุตูู ุนูู ุฌููุน ุงูุงุดุชุฑุงูุงุช
```
GET /make-server-c2f27df0/admin/subscriptions
```

### 2. ุงูุญุตูู ุนูู ุฌููุน ุงูุฅูุตุงูุงุช
```
GET /make-server-c2f27df0/admin/receipts
```

### 3. ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
```
POST /make-server-c2f27df0/admin/create-subscription
Body: {
  "email": "user@example.com",  // ุงุฎุชูุงุฑู
  "plan": "basic",              // basic, standard, premium
  "duration": "30"              // ุจุงูุฃูุงู
}
```

### 4. ุชุญุฏูุซ ุญุงูุฉ ุงูุฅูุตุงู
```
POST /make-server-c2f27df0/admin/update-receipt
Body: {
  "receiptId": "uuid-here",
  "status": "approved"  // approved ุฃู rejected
}
```

---

## ๐จ ุชุฎุตูุตุงุช ุฅุถุงููุฉ

### ุฅุถุงูุฉ ูุฏูุฑูู ุฌุฏุฏ

ุงูุชุญ ุงูููู: `/src/app/components/AdminLoginPage.tsx`

ุงุจุญุซ ุนู:
```typescript
const ADMIN_CREDENTIALS = [
  { email: 'as8543245@gmail.com', password: 'A1999anw#' },
  { email: 'anwaralrawahi459@gmail.com', password: '6101999' }
];
```

ุฃุถู ุญุณุงุจุงุช ุฌุฏูุฏุฉ:
```typescript
const ADMIN_CREDENTIALS = [
  { email: 'as8543245@gmail.com', password: 'A1999anw#' },
  { email: 'anwaralrawahi459@gmail.com', password: '6101999' },
  { email: 'new-admin@example.com', password: 'NewPassword123!' }
];
```

### ุชุบููุฑ ูุฏุฉ ุงูุงุดุชุฑุงู ุงูุงูุชุฑุงุถูุฉ

ูู ุงูููู: `/supabase/functions/server/index.tsx`

ุงุจุญุซ ุนู:
```typescript
expiresAt.setDate(expiresAt.getDate() + 30); // Default 30 days
```

ุบููุฑ `30` ุฅูู ุงููุฏุฉ ุงููุทููุจุฉ.

---

## ๐ก๏ธ ุงูุฃูุงู

### โ ูุง ุชู ุชูููุฐู:
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ูู ุงูููุฏ
- Row Level Security ุนูู ุฌุฏุงูู ุงูุจูุงูุงุช
- ุงุณุชุฎุฏุงู Service Role Key ููุนูููุงุช ุงูุญุณุงุณุฉ
- ูุตู Admin Routes ุนู User Routes

### โ๏ธ ุชูุตูุงุช ุฅุถุงููุฉ:
- **ูุง ุชุดุงุฑู ุจูุงูุงุช ุงููุฏูุฑ ูุน ุฃุญุฏ**
- ุบููุฑ ูููุงุช ุงููุฑูุฑ ุฏูุฑูุงู
- ุฑุงูุจ ุณุฌูุงุช ุงูุฏุฎูู ูู `localStorage`
- ูุธูู `localStorage` ุนูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุชุญูู ูู Console ูู ุงููุชุตูุญ (F12)
2. ุชุญูู ูู Supabase Logs
3. ุชุฃูุฏ ูู ุชูููุฐ ุฌุฏูู `subscriptions`
4. ุชูุงุตู ุนูู: `as8543245@gmail.com`

---

## โ Checklist

ูุจู ุงูุงุณุชุฎุฏุงูุ ุชุฃูุฏ ูู:

- [ ] ุชู ุชูููุฐ ุณูุฑุจุช SQL ูุฌุฏูู `subscriptions`
- [ ] ุชู ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏูู ูู Supabase
- [ ] ุชู ุชุฌุฑุจุฉ ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ ุงููุฏูุฑ
- [ ] ุชุนูู ุฌููุน ุงูุชุจููุจุงุช ูู ููุญุฉ ุงูุชุญูู
- [ ] ูููู ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ ุจูุฌุงุญ
- [ ] ูููู ุนุฑุถ ุงูุฅูุตุงูุงุช ูุงูููุงููุฉ ุนูููุง

---

**ุชู ุจูุฌุงุญ! ๐**

ุงูุขู ูุฏูู ูุธุงู ุฅุฏุงุฑุฉ ูุงูู ููุชูุงูู.
